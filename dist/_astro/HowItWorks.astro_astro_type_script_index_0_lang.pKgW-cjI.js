function w(e,l,f){const o=f.width/2,i=f.height/2,u=f.x+o,y=f.y+i,d=l.x-e.x,x=l.y-e.y;let p=1,E=l.x,a=l.y;if(d!==0){let v=(u-o-e.x)/d,B=(u+o-e.x)/d;[v,B].forEach(r=>{if(r>0&&r<p){const m=e.y+r*x;m>=y-i&&m<=y+i&&(p=r,E=e.x+r*d,a=m)}})}if(x!==0){let v=(y-i-e.y)/x,B=(y+i-e.y)/x;[v,B].forEach(r=>{if(r>0&&r<p){const m=e.x+r*d;m>=u-o&&m<=u+o&&(p=r,E=m,a=e.y+r*x)}})}return{x:E,y:a}}function C(e,l,f,o,i,u,y,d,x=null,p=6){const E=o-l,a=i-f,v=Math.sqrt(E*E+a*a),B=Math.floor(v/(u*2+y));for(let r=0;r<=B;r++){const m=r/B,q=l+E*m,F=f+a*m;e.save(),e.beginPath(),e.arc(q,F,u,0,2*Math.PI),e.closePath();let t=d,s=.7,c=0;if(x!==null){let n=m-x;n<0&&(n+=1),n=n*B,n<.5?(t="#fff0fa",s=1,c=24):n<p?(t="#E4D6F5",s=.7+.3*(1-n/p),c=10*(1-n/p)):(t="#B3acf2",s=.7,c=0)}else t="#B3acf2",s=.7,c=0;e.fillStyle=t,e.globalAlpha=s,c>0&&(e.shadowColor=t,e.shadowBlur=c),e.fill(),e.restore()}}window.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("stardust-canvas"),l=e.getContext("2d"),f=[document.querySelector('.stardust-source[data-source="zoom"]'),document.querySelector('.stardust-source[data-source="gong"]'),document.querySelector('.stardust-source[data-source="teams"]')];document.querySelector(".stardust-starmesh");const o=document.querySelector('.starmesh-component[data-component="connector"]'),i=document.querySelector('.starmesh-component[data-component="intelligence"]'),u=document.querySelector('.gcp-box[data-gcp="bigquery"]'),y=document.querySelector('.gcp-box[data-gcp="gcs"]');function d(t,s){const c=t.getBoundingClientRect(),n=s.getBoundingClientRect();return{x:c.left-n.left,y:c.top-n.top,width:c.width,height:c.height}}function x(){if(l.clearRect(0,0,e.width,e.height),f.forEach(t=>{const s=d(t,e),c=d(o,e),n={x:s.x+s.width/2,y:s.y+s.height/2},g={x:c.x+c.width/2,y:c.y+c.height/2},h=w(g,n,s),M=w(n,g,c);C(l,h.x,h.y,M.x,M.y,2,6,"#B3acf2")}),o&&u){const t=d(o,e),s=d(u,e),c={x:t.x+t.width/2,y:t.y+t.height/2},n={x:s.x+s.width/2,y:s.y+s.height/2},g=w(n,c,t),h=w(c,n,s);C(l,g.x,g.y,h.x,h.y,2,6,"#B3acf2")}if(o&&y){const t=d(o,e),s=d(y,e),c={x:t.x+t.width/2,y:t.y+t.height/2},n={x:s.x+s.width/2,y:s.y+s.height/2},g=w(n,c,t),h=w(c,n,s);C(l,g.x,g.y,h.x,h.y,2,6,"#B3acf2")}if(i&&u){const t=d(i,e),s=d(u,e),c={x:t.x+t.width/2,y:t.y+t.height/2},n={x:s.x+s.width/2,y:s.y+s.height/2},g=w(n,c,t),h=w(c,n,s);C(l,g.x,g.y,h.x,h.y,2,6,"#B3acf2")}if(y&&i){const t=d(y,e),s=d(i,e),c={x:t.x+t.width/2,y:t.y+t.height/2},n={x:s.x+s.width/2,y:s.y+s.height/2},g=w(n,c,t),h=w(c,n,s);C(l,g.x,g.y,h.x,h.y,2,6,"#B3acf2")}}function p(t){let s=!0,c=t.map(()=>0);function n(){s&&(l.clearRect(0,0,e.width,e.height),x(),t.forEach(([g,h,M],D)=>{const L=d(g,e),S=d(h,e),R={x:L.x+L.width/2,y:L.y+L.height/2},P={x:S.x+S.width/2,y:S.y+S.height/2},z=w(P,R,L),A=w(R,P,S);C(l,z.x,z.y,A.x,A.y,2,6,M,c[D],6),c[D]+=.02,c[D]>1&&(c[D]-=1)}),requestAnimationFrame(n))}return n(),()=>{s=!1,x()}}function E(){const t=e.parentElement;e.width=t.offsetWidth,e.height=300,x()}E(),window.addEventListener("resize",E),x();let a=null;f.forEach(t=>{t.addEventListener("mouseenter",()=>{a=p([[t,o,"#B3acf2"],[o,u,"#8B5CF6"],[o,y,"#8B5CF6"]])}),t.addEventListener("mouseleave",()=>{a&&a()})}),o&&(o.addEventListener("mouseenter",()=>{a&&a(),a=p([[f[0],o,"#B3acf2"],[f[1],o,"#B3acf2"],[f[2],o,"#B3acf2"],[o,u,"#8B5CF6"],[o,y,"#8B5CF6"]])}),o.addEventListener("mouseleave",()=>{a&&a()})),i&&(i.addEventListener("mouseenter",()=>{a&&a(),a=p([[y,i,"#E4D6F5"],[i,u,"#E4D6F5"]])}),i.addEventListener("mouseleave",()=>{a&&a()}));const v=document.querySelector(".gcp-meta-metadata"),B=document.querySelector(".gcp-meta-topics"),r=document.querySelector(".gcp-meta-sentiment"),m=document.querySelector(".gcp-meta-entities"),q=document.querySelector(".gcp-meta-transcripts"),F=document.querySelector(".gcp-meta-media");o.addEventListener("mouseenter",()=>{v.classList.add("gcp-meta-glow"),q.classList.add("gcp-meta-glow"),F.classList.add("gcp-meta-glow")}),o.addEventListener("mouseleave",()=>{v.classList.remove("gcp-meta-glow"),q.classList.remove("gcp-meta-glow"),F.classList.remove("gcp-meta-glow")}),i.addEventListener("mouseenter",()=>{B.classList.add("gcp-meta-glow-intel"),r.classList.add("gcp-meta-glow-intel"),m.classList.add("gcp-meta-glow-intel")}),i.addEventListener("mouseleave",()=>{B.classList.remove("gcp-meta-glow-intel"),r.classList.remove("gcp-meta-glow-intel"),m.classList.remove("gcp-meta-glow-intel")})});
